# Shorthack Backend

[![Coverage Status](https://coveralls.io/repos/github/shrthack/backend/badge.svg?branch=main)](https://coveralls.io/github/shrthack/backend?branch=main)
[![Python Version](https://img.shields.io/badge/python-3.13+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1+-green.svg)](https://fastapi.tiangolo.com/)

## Возможности

- **Управление клиентами**: Регистрация пользователей, аутентификация и управление профилями
- **Координация мероприятий**: Создание и управление событиями хакатонов с детальным расписанием
- **Система товаров**: Отслеживание и распределение товаров мероприятия
- **Распределение стендов**: Управление назначением стендов и будок для участников
- **Панель аналитики**: Комплексная аналитика мероприятий и insights
- **Система баллов**: Функции геймификации с отслеживанием баллов и наградами
- **Безопасная аутентификация**: Аутентификация на основе JWT с хэшированием паролей Argon2

## Стек

- **Язык**: Python 3.13+
- **Фреймворк**: FastAPI (высокопроизводительный асинхронный веб-API)
- **База данных**: PostgreSQL с ORM SQLAlchemy
- **Генерация кода**: sqlc (типобезопасные SQL-запросы)
- **Аутентификация**: JWT-токены с HS256
- **Хэширование паролей**: Argon2
- **Управление зависимостями**: Poetry
- **Контейнеризация**: Docker & Docker Compose
- **Тестирование**: pytest с отчетами о покрытии

## Документация API

Интерактивная документация API доступна через Swagger UI:

- **Swagger UI**: [Ссылка](http://93.185.159.71/docs) 
- **ReDoc**: [Ссылка](http://93.185.159.71/redoc) 

## Быстрый старт

### Предварительные требования

- Python 3.13+
- Poetry
- Docker и Docker Compose
- sqlc (для генерации кода базы данных)

API будет доступен по адресу `http://localhost:8000`.

## Тестирование

Запустите полный набор тестов с покрытием:

```bash
poetry run pytest --cov=src --cov-report=html
```
## Разработка

### Миграции базы данных

Добавляйте новые миграции в директорию `migrations/` в формате goose:

```bash
-- +goose Up
CREATE TABLE example (...);
-- +goose Down
DROP TABLE example;
```

### Архитектура

Кодовая база следует паттерну чистой архитектуры:

- **Handlers**: Обработчики маршрутов FastAPI (HTTP-слой)
- **Cases**: Бизнес-логика и варианты использования
- **Entities**: Модели данных и валидация
- **Infra**: Внешние интеграции (БД, JWT, хэширование)
- **DB**: Запросы к базе данных и модели (генерируются sqlc)

